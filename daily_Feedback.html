<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì˜¤ëŠ˜ì˜ í•™ìŠµ í”¼ë“œë°±</title>

    <!-- ê¸°ì¡´ í”„ë¡œì íŠ¸ CSS ë° í°íŠ¸ -->
    <link rel="stylesheet" href="css/styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;700&display=swap"
      rel="stylesheet"
    />

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Pretendard", -apple-system, BlinkMacSystemFont, sans-serif;
        background-color: #fdf8f4;
        color: #333;
        line-height: 1.6;
      }

      /* ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°” */
      .header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background-color: #fdf8f4;
        padding: 12px 20px;
        border-bottom: 1px solid #e8ddd4;
        display: flex;
        justify-content: space-between;
        align-items: center;
        z-index: 1000;
      }

      .logo {
        display: flex;
        align-items: center;
        font-size: 18px;
        font-weight: 700;
        color: #f96c50;
      }

      .logo i {
        margin-right: 8px;
        font-size: 24px;
      }

      .header-actions {
        display: flex;
        gap: 16px;
      }

      .header-btn {
        background: none;
        border: none;
        font-size: 20px;
        color: #666;
        cursor: pointer;
        transition: color 0.3s ease;
      }

      .header-btn:hover {
        color: #f96c50;
      }

      /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
      .main-container {
        margin-top: 80px;
        padding: 20px;
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
      }

      /* í˜ì´ì§€ íƒ€ì´í‹€ */
      .page-title {
        text-align: center;
        margin-bottom: 30px;
      }

      .page-title h1 {
        font-size: 28px;
        font-weight: 700;
        color: #333;
        margin-bottom: 8px;
      }

      .page-title p {
        font-size: 16px;
        color: #666;
      }

      /* ì¹´ë“œ ê³µí†µ ìŠ¤íƒ€ì¼ */
      .card {
        background: white;
        border-radius: 16px;
        padding: 24px;
        margin-bottom: 20px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        border: 1px solid #f0f0f0;
      }

      .card-title {
        font-size: 20px;
        font-weight: 600;
        color: #333;
        margin-bottom: 16px;
        display: flex;
        align-items: center;
      }

      .card-title i {
        margin-right: 8px;
        color: #f96c50;
      }

      /* ì˜¤ëŠ˜ì˜ í•™ìŠµ ìš”ì•½ */
      .summary-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
      }

      .stat-item {
        text-align: center;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 12px;
      }

      .stat-value {
        font-size: 32px;
        font-weight: 700;
        color: #f96c50;
        margin-bottom: 4px;
      }

      .stat-label {
        font-size: 14px;
        color: #666;
      }

      .progress-bar {
        width: 100%;
        height: 8px;
        background: #e8ddd4;
        border-radius: 4px;
        overflow: hidden;
        margin: 16px 0;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #f96c50, #ff8a75);
        width: 0%;
        border-radius: 4px;
        transition: width 0.5s ease;
      }

      .comparison-text {
        background: #e8f5e8;
        padding: 12px 16px;
        border-radius: 8px;
        color: #2d7a2d;
        font-size: 14px;
        border-left: 4px solid #4caf50;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      /* ì˜¤ëŠ˜ì˜ ê³µë¶€ ëª©ë¡ */
      .study-list {
        list-style: none;
      }

      .study-item {
        display: flex;
        align-items: center;
        padding: 16px 0;
        border-bottom: 1px solid #f0f0f0;
      }

      .study-item:last-child {
        border-bottom: none;
      }

      .study-checkbox {
        width: 20px;
        height: 20px;
        border: 2px solid #f96c50;
        border-radius: 4px;
        margin-right: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #f96c50;
        color: white;
        font-size: 12px;
      }

      .study-text {
        font-size: 16px;
        color: #333;
      }

      /* ì˜¤ëŠ˜ì˜ í”¼ë“œë°± */
      .feedback-card {
        background: linear-gradient(135deg, #fff5f3, #fff8f7);
        border-left: 4px solid #f96c50;
      }

      .feedback-text {
        font-size: 16px;
        line-height: 1.8;
        color: #444;
        padding: 16px;
        background: rgba(255, 255, 255, 0.7);
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      /* ì£¼ê°„ í•™ìŠµ ë³€í™” */
      .chart-container {
        display: flex;
        align-items: center;
        gap: 24px;
      }

      .chart-visual {
        flex-shrink: 0;
        width: 120px;
        height: 120px;
        border-radius: 50%;
        background: conic-gradient(#f96c50 0deg 252deg, #e8ddd4 252deg 360deg);
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
      }

      .chart-visual::before {
        content: "";
        width: 80px;
        height: 80px;
        background: white;
        border-radius: 50%;
        position: absolute;
      }

      .chart-value {
        position: relative;
        z-index: 1;
        font-size: 24px;
        font-weight: 700;
        color: #f96c50;
      }

      .chart-info h3 {
        font-size: 18px;
        font-weight: 600;
        color: #333;
        margin-bottom: 8px;
      }

      .chart-info p {
        font-size: 14px;
        color: #666;
        margin-bottom: 12px;
      }

      .trend-positive {
        background: #e8f5e8;
        color: #2d7a2d;
        padding: 8px 12px;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 6px;
      }

      /* ìƒí˜¸ì‘ìš© ë²„íŠ¼ */
      .action-buttons {
        display: flex;
        flex-direction: column;
        gap: 16px;
        margin-top: 32px;
      }

      .btn-primary {
        background: #f96c50;
        color: white;
        border: none;
        padding: 16px 24px;
        border-radius: 12px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }

      .btn-primary:hover {
        background: #e85a3f;
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(249, 108, 80, 0.3);
      }

      .btn-secondary {
        background: linear-gradient(135deg, #ffe5e0, #fff0ed);
        color: #f96c50;
        border: 2px solid #f96c50;
        padding: 16px 24px;
        border-radius: 12px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .btn-secondary:hover {
        background: #f96c50;
        color: white;
        transform: translateY(-2px);
      }

      .encouragement-section {
        text-align: center;
        padding: 32px 24px;
        background: linear-gradient(135deg, #fff8f7, #fff5f3);
        border-radius: 16px;
        margin: 32px 0;
      }

      .encouragement-text {
        font-size: 24px;
        font-weight: 600;
        color: #333;
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .encouragement-subtitle {
        font-size: 16px;
        color: #666;
        margin-bottom: 24px;
      }

      /* í•˜ë‹¨ í‘¸í„° */
      .footer {
        background: #faf5f1;
        padding: 32px 20px;
        text-align: center;
        margin-top: 60px;
        border-top: 1px solid #e8ddd4;
      }

      .footer-content {
        max-width: 800px;
        margin: 0 auto;
      }

      .footer-links {
        display: flex;
        justify-content: center;
        gap: 24px;
        margin-bottom: 16px;
      }

      .footer-links a {
        color: #666;
        text-decoration: none;
        font-size: 14px;
        transition: color 0.3s ease;
      }

      .footer-links a:hover {
        color: #f96c50;
      }

      .footer-text {
        font-size: 12px;
        color: #999;
      }

      /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 2000;
        animation: fadeIn 0.3s ease;
      }

      .modal-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 32px;
        border-radius: 16px;
        max-width: 500px;
        width: 90%;
        animation: slideUp 0.3s ease;
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .modal-title {
        font-size: 20px;
        font-weight: 600;
        color: #333;
      }

      .close-btn {
        background: none;
        border: none;
        font-size: 24px;
        color: #666;
        cursor: pointer;
      }

      /* ë°˜ì‘í˜• ë””ìì¸ */
      @media (max-width: 768px) {
        .main-container {
          padding: 16px;
        }

        .card {
          padding: 20px;
        }

        .summary-stats {
          grid-template-columns: 1fr;
          gap: 16px;
        }

        .chart-container {
          flex-direction: column;
          text-align: center;
        }

        .page-title h1 {
          font-size: 24px;
        }

        .header {
          padding: 12px 16px;
        }

        .footer-links {
          flex-direction: column;
          gap: 12px;
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }

        to {
          opacity: 1;
        }
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translate(-50%, -40%);
        }

        to {
          opacity: 1;
          transform: translate(-50%, -50%);
        }
      }

      #emoji-rating span {
        transition: all 0.2s;
        border-radius: 50%;
        padding: 2px 4px;
      }

      #emoji-rating span.selected {
        transform: scale(1.3);
        filter: none;
        background: #fff0ed;
      }

      #emoji-rating span.unselected {
        filter: grayscale(1);
        opacity: 0.5;
        transform: scale(1);
        background: none;
      }

      #satisfaction-text {
        resize: none;
        overflow: hidden;
        transition: height 0.2s;
        box-sizing: border-box;
        width: 90%;
        max-width: 400px;
        display: none;
        margin-bottom: 12px;
        border-radius: 8px;
        border: 1px solid #e8ddd4;
        padding: 8px;
      }
    </style>
  </head>

  <body>
    <!-- ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <header class="header">
      <div class="logo">
        <i class="fas fa-graduation-cap"></i>
        MyStudy
      </div>
      <div class="header-actions">
        <button class="header-btn" title="í”„ë¡œí•„">
          <i class="fas fa-user"></i>
        </button>
        <button class="header-btn" title="ì„¤ì •">
          <i class="fas fa-cog"></i>
        </button>
      </div>
    </header>

    <div class="main-container">
      <!-- í˜ì´ì§€ íƒ€ì´í‹€ -->
      <div class="page-title">
        <h1>ì˜¤ëŠ˜ì˜ í•™ìŠµ í”¼ë“œë°± ğŸ“…</h1>
        <p id="feedback-date">â€” â€” â€” â€” â€” í•™ìŠµ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”</p>
      </div>

      <!-- ì˜¤ëŠ˜ì˜ í•™ìŠµ ìš”ì•½ -->
      <div class="card">
        <h2 class="card-title">
          <i class="fas fa-chart-line"></i>
          ì˜¤ëŠ˜ì˜ í•™ìŠµ ìš”ì•½
        </h2>

        <div class="summary-stats">
          <div class="stat-item">
            <div id="stat-achievement" class="stat-value">--%</div>
            <div class="stat-label">ëª©í‘œ ë‹¬ì„±ë¥ </div>
            <div class="progress-bar">
              <div id="progress-fill" class="progress-fill"></div>
            </div>
          </div>
          <div class="stat-item">
            <div id="stat-time" class="stat-value">--ì‹œê°„ --ë¶„</div>
            <div class="stat-label">ì´ í•™ìŠµ ì‹œê°„</div>
          </div>
        </div>

        <div id="comparison-text" class="comparison-text" style="display: none">
          <i class="fas fa-arrow-up"></i>
          <!-- ì „ì£¼ ëŒ€ë¹„ í•™ìŠµ ì‹œê°„ ì¦ê° ë©”ì‹œì§€ -->
          ì§€ë‚œì£¼ ì˜¤ëŠ˜ë³´ë‹¤ --ë¶„ ë” ê³µë¶€í–ˆì–´ìš”
        </div>
      </div>

      <!-- ì˜¤ëŠ˜ì˜ ê³µë¶€ ëª©ë¡ -->
      <div class="card">
        <h2 class="card-title">
          <i class="fas fa-book"></i>
          ì˜¤ëŠ˜ì˜ ê³µë¶€ ëª©ë¡
        </h2>

        <ul id="study-list" class="study-list">
          <!-- API ì—ì„œ ë°›ì•„ì˜¨ í•™ìŠµ ë¦¬ìŠ¤íŠ¸ê°€ ì—¬ê¸°ì— ë Œë”ë§ë©ë‹ˆë‹¤. -->
          <!-- ì˜ˆì‹œ ì¶”ê°€:
                <li class="study-item">
                    <span class="study-checkbox"><i class="fas fa-check"></i></span>
                    <span class="study-text">ì˜ì–´ ìˆ˜í–‰í‰ê°€: ë¬¸ì œì§‘ 131-133ìª½</span>
                </li>
                -->
        </ul>
      </div>

      <!-- ì˜¤ëŠ˜ì˜ í”¼ë“œë°± -->
      <div class="card feedback-card">
        <h2 class="card-title">
          <i class="fas fa-comment-dots"></i>
          ì˜¤ëŠ˜ì˜ í”¼ë“œë°±
        </h2>

        <div id="feedback-text" class="feedback-text">
          <!-- API ì—ì„œ ë°›ì•„ì˜¨ í”¼ë“œë°± í…ìŠ¤íŠ¸ê°€ ì—¬ê¸°ì— ë Œë”ë§ë©ë‹ˆë‹¤. -->
        </div>
      </div>

      <!-- ë§Œì¡±ë„ ì…ë ¥ ì„¹ì…˜ -->
      <div
        class="card"
        id="satisfaction-section"
        style="text-align: center; margin-bottom: 32px"
      >
        <h3 style="margin-bottom: 12px">ì˜¤ëŠ˜ ê³„íš ìƒì„±ì— ëŒ€í•œ ë§Œì¡±ë„!</h3>
        <div
          id="emoji-rating"
          style="
            font-size: 2rem;
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-bottom: 12px;
          "
        >
          <span data-value="1" title="ë§¤ìš° ë¶ˆë§Œì¡±" style="cursor: pointer"
            >ğŸ˜¡</span
          >
          <span data-value="2" title="ë¶ˆë§Œì¡±" style="cursor: pointer">ğŸ˜•</span>
          <span data-value="3" title="ë³´í†µ" style="cursor: pointer">ğŸ˜</span>
          <span data-value="4" title="ë§Œì¡±" style="cursor: pointer">ğŸ™‚</span>
          <span data-value="5" title="ë§¤ìš° ë§Œì¡±" style="cursor: pointer"
            >ğŸ˜</span
          >
        </div>
        <div
          id="selected-rating"
          style="margin-bottom: 12px; color: #f96c50; font-weight: 600"
        ></div>
        <textarea
          id="satisfaction-text"
          rows="2"
          placeholder="ì˜¤ëŠ˜ ê³„íšì— ëŒ€í•´ í•œì¤„í‰ì„ ë‚¨ê²¨ì£¼ì„¸ìš”!"
          style="
            width: 100%;
            max-width: 100%;
            display: none;
            margin-bottom: 12px;
            border-radius: 8px;
            border: 1px solid #e8ddd4;
            padding: 8px;
            box-sizing: border-box;
          "
        ></textarea>
        <br />
        <button
          id="satisfaction-submit"
          class="btn-secondary"
          style="display: none"
        >
          ì œì¶œí•˜ê¸°
        </button>
        <div
          id="satisfaction-result"
          style="margin-top: 10px; color: #2d7a2d; font-weight: 500"
        ></div>
      </div>
      <!-- ì˜¤ëŠ˜ í•˜ë£¨ë„ ìˆ˜ê³ í–ˆì–´ìš” -->
      <div class="encouragement-section">
        <div class="encouragement-text">ì˜¤ëŠ˜ í•˜ë£¨ë„ ìˆ˜ê³ í–ˆì–´ìš”! ğŸ‰</div>
        <div class="encouragement-subtitle" id="encouragement-subtitle">
          ê¾¸ì¤€í•œ ë…¸ë ¥ì´ í° ì„±ê³¼ë¥¼ ë§Œë“¤ì–´ëƒ…ë‹ˆë‹¤
        </div>
        <button id="encourage-btn" class="btn-secondary">
          ë‚´ì¼ë„ í™”ì´íŒ…! ğŸ’ª
        </button>
      </div>
    </div>

    <!-- í•˜ë‹¨ í‘¸í„° -->
    <footer class="footer">
      <div class="footer-content">
        <div class="footer-links">
          <a href="#team">íŒ€ ì†Œê°œ</a>
          <a href="#contact">ë¬¸ì˜í•˜ê¸°</a>
          <a href="#privacy">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
          <a href="#terms">ì´ìš©ì•½ê´€</a>
        </div>
        <div class="footer-text">Â© 2024 HCI Team 6. All rights reserved.</div>
      </div>
    </footer>

    <!-- í”¼ë“œë°± ìƒì„¸ ëª¨ë‹¬ -->
    <!-- <div id="feedbackModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ìƒì„¸ í”¼ë“œë°± ğŸ“</h3>
                <button class="close-btn" onclick="closeFeedbackModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="modal-body">
                AIì—ê²Œ ì˜¤ëŠ˜ì˜ í•™ìŠµì— ëŒ€í•œ í”¼ë“œë°±ì„ ìš”ì²­í•œ í›„,
                AIê°€ ì œê³µí•œ ìƒì„¸ í”¼ë“œë°± ë‚´ìš©ì„ ì—¬ê¸°ì— ë Œë”ë§í•©ë‹ˆë‹¤.
                (ì•½ê°„ í•™ìƒë“¤ì—ê²Œ ì–´ë–¤ ë¶€ë¶„ì´ ì–´ë ¤ì› ëŠ”ì§€ í™•ì¸ì„ ë°›ëŠ” ê²ƒë„ ê´œì°®ì„ ë“¯?)
                ì˜ˆì‹œ:
                <h4>ì˜¤ëŠ˜ì˜ í•™ìŠµ ë¶„ì„</h4>
                <p>ê³±ì…ˆ ê³µì‹ ë¶€ë¶„ì—ì„œ ì•½ê°„ì˜ ì–´ë ¤ì›€ì„ ê²ªìœ¼ì…¨ë„¤ìš”. ì´ëŠ” ìƒˆë¡œìš´ ê°œë…ì„ í•™ìŠµí•  ë•Œ ìì—°ìŠ¤ëŸ¬ìš´ ê³¼ì •ì…ë‹ˆë‹¤.</p>
                <h4>ê°œì„  ì œì•ˆ</h4>
                <ul>
                    <li>ê³±ì…ˆ ê³µì‹ì„ ë‹¨ê³„ë³„ë¡œ ë‚˜ëˆ ì„œ ë³µìŠµí•´ë³´ì„¸ìš”</li>
                    <li>ì˜ˆì œ ë¬¸ì œë¥¼ ë” í’€ì–´ë³´ì‹œëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤</li>
                    <li>ë‚´ì¼ 10ë¶„ ì •ë„ ê°„ë‹¨í•œ ë³µìŠµ ì‹œê°„ì„ ê°€ì ¸ë³´ì„¸ìš”</li>
                </ul>
                <h4>ê²©ë ¤ ë©”ì‹œì§€</h4>
                <p>ì˜¤ëŠ˜ë„ ëª©í‘œì˜ 70%ë¥¼ ë‹¬ì„±í•˜ì…¨ìŠµë‹ˆë‹¤. ê¾¸ì¤€í•œ ë…¸ë ¥ì´ ì‹¤ë ¥ í–¥ìƒìœ¼ë¡œ ì´ì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤!</p>
            </div>
        </div>
    </div> -->

    <!-- JavaScript -->
    <script src="js/common.js"></script>
    <script>
      // í˜ì´ì§€ê°€ ë¡œë“œë˜ë©´ APIë¥¼ í†µí•´ ì˜¤ëŠ˜ì˜ í”¼ë“œë°± ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ
      // UI ìš”ì†Œì— ë Œë”ë§í•©ë‹ˆë‹¤.
      const generateFeedback = function() {
          const feedbacks = [
            {
                "analysis": "ì˜¤ëŠ˜ ì´ì°¨í•¨ìˆ˜ ê°œë… ë³µìŠµì„ 60ë¶„ì— 100% ì™„ë£Œí•´ ê°œë… ì´í•´ê°€ íƒ„íƒ„í•´ì¡ŒìŠµë‹ˆë‹¤. ë°˜ë©´ ìŠ¤ìŠ¤ë¡œ í™•ì¸í•˜ê¸° ë¬¸ì œëŠ” 45ë¶„ì— 70% í’€ì–´ ì •í™•ë„ì™€ ì‹¤ì „ ì ìš© ì—°ìŠµì´ ë” í•„ìš”í•©ë‹ˆë‹¤.",
                "suggestion": "ë‚´ì¼ì€ ì‹¤ì œ ì‹œí—˜ì²˜ëŸ¼ 30ë¶„ ë™ì•ˆ ì´ì°¨í•¨ìˆ˜ ë¬¸ì œ 10ë¬¸ì œë¥¼ í’€ì–´ë³´ì„¸ìš”. ëª©í‘œëŠ” ìµœì†Œ 8ë¬¸ì œ ë§íˆê¸°, í‹€ë¦° ë¬¸ì œëŠ” ì˜¤ë‹µ ë…¸íŠ¸ì— í•µì‹¬ í’€ì´ ê³¼ì •ì„ 2~3ì¤„ë¡œ ì •ë¦¬í•´ë‘ë©´ íš¨ìœ¨ì ìœ¼ë¡œ ì ìˆ˜ë¥¼ ì˜¬ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                "encouragement": "ì‘ì€ ì„±ì·¨ê°€ ëª¨ì—¬ í° ì ìˆ˜ ì°¨ì´ë¥¼ ë§Œë“­ë‹ˆë‹¤. ê¾¸ì¤€íˆ ì—°ìŠµí•˜ë©° í•œ ê±¸ìŒì”© ë‚˜ì•„ê°€ìš”!"
            },
            {
                "analysis": "ì˜¤ëŠ˜ ì´ì°¨í•¨ìˆ˜ ê°œë… ë³µìŠµì€ 100% ì™„ë²½íˆ ë§ˆì³¤ê³  60ë¶„ì„ íˆ¬ìí•´ ê¸°ì´ˆë¥¼ ë‹¤ì¡ŒìŠµë‹ˆë‹¤. ë¬¸ì œ í’€ì´(45ë¶„)ëŠ” 70% ì •í™•ë„ë¡œ, íŠ¹íˆ ê¼­ì§“ì  ì¢Œí‘œì™€ ëŒ€ì¹­ì¶• ë¬¸ì œì—ì„œ ì˜¤ë‹µì´ ìˆì—ˆìŠµë‹ˆë‹¤. ê¾¸ì¤€í•œ ë³µìŠµì€ ê°•ì ì´ì§€ë§Œ ë¬¸ì œ ì •í™•ë„ë¥¼ ë†’ì¼ ì—¬ì§€ê°€ ë³´ì…ë‹ˆë‹¤.",
                "suggestion": "ë‚´ì¼ì€ ì˜¤ëŠ˜ í‹€ë¦° 3~5ë¬¸ì œë¥¼ ê³¨ë¼ í’€ì´ ê³¼ì •ì„ í•„ê¸°í•˜ë©° ì˜¤ë‹µ ë…¸íŠ¸ë¥¼ ë§Œë“¤ê³ , ìœ ì‚¬ ë¬¸ì œ 5ê°œë¥¼ 30ë¶„ íƒ€ì´ë¨¸ë¥¼ ì¼œê³  í’€ì–´ ì¦‰ì‹œ ì±„ì  í›„ ì˜¤ë‹µ ì›ì¸ì„ ì •ë¦¬í•´ë³´ì„¸ìš”.",
                "encouragement": "ì‘ì€ ë…¸ë ¥ë“¤ì´ ëª¨ì—¬ ë†’ì€ ì ìˆ˜ë¡œ ì´ì–´ì§‘ë‹ˆë‹¤. ì˜¤ëŠ˜ë„ ì˜í–ˆì–´ìš”, ë‚´ì¼ë„ íŒŒì´íŒ…!"
            },
            {
                "analysis": "ì˜¤ëŠ˜ ì´ì°¨í•¨ìˆ˜ ë³µìŠµì—ì„œ ê°œë… ì´í•´ë¥¼ 100% ë‹¬ì„±í•´ íƒ„íƒ„í•œ ê¸°ì´ˆë¥¼ ë‹¤ì¡ŒìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì‹¤ì „ ë¬¸ì œ í’€ì´ëŠ” 70% ìˆ˜ì¤€ìœ¼ë¡œ, íŠ¹íˆ ì‘ìš© ë¬¸ì œì—ì„œ ì‹œê°„ì´ ë¶€ì¡±í•˜ê±°ë‚˜ í’€ì´ ì ˆì°¨ê°€ í—·ê°ˆë¦° ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.",
                "suggestion": "ë‚´ì¼ì€ ì‹œí—˜ ì§ì „ì²˜ëŸ¼ 30ë¶„ ì•ˆì— ì´ì°¨í•¨ìˆ˜ ë¬¸ì œ 10ë¬¸ì œë¥¼ í’€ê³ , í‹€ë¦¬ê±°ë‚˜ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦° ë¬¸ì œëŠ” ì¦‰ì‹œ ì˜¤ë‹µ ë…¸íŠ¸ì— ì •ë¦¬í•´ ë³´ì„¸ìš”.",
                "encouragement": "ì§€ê¸ˆì²˜ëŸ¼ ê¸°ì´ˆë¥¼ ë‹¤ì§€ê³  ì‹¤ì „ ì—°ìŠµì„ ëŠ˜ë¦¬ë©´ ê³§ ì ìˆ˜ í–¥ìƒì´ ëˆˆì— ë³´ì¼ ê±°ì˜ˆìš”!"
            },
            {
                "analysis": "ì˜¤ëŠ˜ ì´ì°¨í•¨ìˆ˜ í•µì‹¬ ê°œë… ë³µìŠµì„ 100% ì™„ë£Œí•˜ë©° ê·¸ë˜í”„ ê°œí˜• ì´í•´ê°€ íƒ„íƒ„í•´ì¡ŒìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ìŠ¤ìŠ¤ë¡œ í™•ì¸í•˜ê¸° ë¬¸ì œëŠ” 70%ë§Œ ë§ì¶° ì‹œí—˜ ëŒ€ë¹„ê°€ ë¶€ì¡±í•œ ë¶€ë¶„ì´ ë‚¨ì•„ ìˆìŠµë‹ˆë‹¤.",
                "suggestion": "ë‚´ì¼ì€ í‹€ë¦° ë¬¸ì œ ìœ„ì£¼ë¡œ ì˜¤ë‹µë…¸íŠ¸ë¥¼ ë§Œë“¤ì–´ í•µì‹¬ ê³µì‹ê³¼ í’€ì´ ê³¼ì •ì„ ì •ë¦¬í•œ ë’¤, 30ë¶„ ë™ì•ˆ íƒ€ì´ë¨¸ë¥¼ ì¼œê³  10ë¬¸ì œë¥¼ í’€ì–´ë³´ì„¸ìš”. ìŠ¤ìŠ¤ë¡œ ì±„ì í•´ ëª©í‘œ ë§íŒ ê°œìˆ˜ë¥¼ ê¸°ë¡í•˜ë©´ ì„±ì·¨ê°ì„ ëŠë¼ê¸° ì¢‹ìŠµë‹ˆë‹¤.",
                "encouragement": "ì§€ê¸ˆì²˜ëŸ¼ ê¾¸ì¤€íˆ í•´ë‚˜ê°€ë©´ ì ì  ì‹œí—˜ ì„±ì ì— ìì‹ ê°ì´ ìƒê¸¸ ê±°ì˜ˆìš”. í™”ì´íŒ…!"
            },
            {
                "analysis": "ì˜¤ëŠ˜ ì´ì°¨í•¨ìˆ˜ í•µì‹¬ ê°œë… ë³µìŠµì„ 100% ì™„ë£Œí•˜ë©° ê¸°ì´ˆë¥¼ íƒ„íƒ„íˆ ë‹¤ì¡ŒìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë¬¸ì œ í’€ì´ì—ì„œëŠ” 70%ì˜ ì •ë‹µë¥ ì„ ë³´ì—¬, íŠ¹íˆ ê¼­ì§“ì  ì¢Œí‘œì™€ ì´ì°¨ì‹ ë³€í˜• ë¬¸ì œì—ì„œ ì‹¤ìˆ˜ê°€ ìˆì—ˆìŠµë‹ˆë‹¤.",
                "suggestion": "ë‚´ì¼ì€ ì˜¤ë‹µ ë…¸íŠ¸ì— í‹€ë¦° ë¬¸ì œë¥¼ ìœ í˜•ë³„ë¡œ ì •ë¦¬í•œ ë’¤, ë¹„ìŠ·í•œ ë¬¸ì œ 3ê°œë¥¼ ê°ê° ì œí•œì‹œê°„ 10ë¶„ ì•ˆì— í’€ì–´ ë³´ì„¸ìš”. ì‹œí—˜ ì‹¤ì „ ê°ê°ê³¼ ë¬¸ì œ í•´ê²° ì†ë„ë¥¼ ë™ì‹œì— ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                "encouragement": "ì‘ì€ ì„±ì·¨ë“¤ì´ ìŒ“ì´ë©´ ì ìˆ˜ê°€ í¬ê²Œ ì˜¤ë¦…ë‹ˆë‹¤. ê¾¸ì¤€íˆ í•´ ë‚˜ê°€ë©´ ì›í•˜ëŠ” ëª©í‘œì— ê¼­ ë„ë‹¬í•  ê±°ì˜ˆìš”!"
            },
          ];

          const feedback = feedbacks[Math.floor(Math.random() * feedbacks.length)];

          return [`<b>ğŸ” í•™ìŠµ ë¶„ì„</b>${feedback.analysis}<b>ğŸ’¬ ì œì•ˆ</b>${feedback.suggestion}`, feedback.encouragement];
      }
      const myfetch = function(url, options) {
          if (url === "/api/feedback/daily") {
              return Promise.resolve({
                  ok: true,
                  status: 200,
                  json: () => Promise.resolve({
                      date: (new Date()).toLocaleString("default", {
                          year: "numeric",
                          day: "numeric",
                          month: "numeric",
                          weekday: "long",
                      }),
                      achievement: 87,
                      totalTime: 105,
                      studyItems: [
                        "ì´ì°¨í•¨ìˆ˜ ë³µìŠµ: í•µì‹¬ ê°œë… ë° ax^2 ê·¸ë˜í”„ ê°œí˜•(pp.118-129)",
                        "ì´ì°¨í•¨ìˆ˜ ë¬¸ì œ: ìŠ¤ìŠ¤ë¡œ í™•ì¸í•˜ê¸° í’€ê¸°(p.121, p.128, p.133)",
                      ],
                  })
              });
          }

          return Promise.resolve({
              ok: false,
              status: 404,
              json: () => Promise.resolve({ error: "Not found" })
          });
      };

      document.addEventListener("DOMContentLoaded", function () {
        // ì˜ˆì‹œ ì—”ë“œí¬ì¸íŠ¸: '/api/today-feedback'
        myfetch("/api/feedback/daily")
          .then((response) => response.json())
          .then((data) => {
            // ë‚ ì§œ í‘œê¸°
            const dateElem = document.getElementById("feedback-date");
            dateElem.textContent =
              data.date || "â€” â€” â€” â€” â€” í•™ìŠµ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”";

            // ì˜¤ëŠ˜ì˜ í•™ìŠµ ìš”ì•½
            document.getElementById("stat-achievement").textContent =
              data.achievement + "%";
            document.getElementById("stat-time").textContent = Math.floor(data.totalTime / 60) + "ì‹œê°„ " + (data.totalTime % 60) + "ë¶„";
            document.getElementById("progress-fill").style.width =
              data.achievement + "%";

            if (data.comparisonText) {
              const compText = document.getElementById("comparison-text");
              compText.style.display = "flex";
              compText.innerHTML = `<i class="fas fa-arrow-up"></i> ${data.comparisonText}`;
            }

            // ì˜¤ëŠ˜ì˜ ê³µë¶€ ëª©ë¡
            const studyList = document.getElementById("study-list");
            studyList.innerHTML = "";
            data.studyItems.forEach((item) => {
              const li = document.createElement("li");
              li.className = "study-item";
              li.innerHTML = `
                            <span class="study-checkbox"><i class="fas fa-check"></i></span>
                            <span class="study-text">${item}</span>
                        `;
              studyList.appendChild(li);
            });

            const [feedback, encouragement] = generateFeedback();

            // ì˜¤ëŠ˜ì˜ í”¼ë“œë°±
            document.getElementById("feedback-text").innerHTML = feedback;

            // ëª¨ë‹¬ ë‚´ìš©
            // const modalBody = document.getElementById("modal-body");
            // modalBody.innerHTML = data.detailedFeedbackHTML;

            document.getElementById("encouragement-subtitle").textContent = encouragement;
          })
          .catch((err) => {
            console.error("í”¼ë“œë°±ì„ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", err);
          });

        // ê²©ë ¤ ë²„íŠ¼ ë¡œì§
        const encourageBtn = document.getElementById("encourage-btn");
        encourageBtn.addEventListener("click", function () {
          this.innerHTML =
            '<i class="fas fa-heart"></i> ì‘ì›í•´ì£¼ì…”ì„œ ê°ì‚¬í•´ìš”! â¤ï¸';
          this.style.background = "#F96C50";
          this.style.color = "white";
          this.style.border = "2px solid #F96C50";

          setTimeout(() => {
            this.innerHTML = "ë‚´ì¼ë„ í™”ì´íŒ…! ğŸ’ª";
            this.style.background = "linear-gradient(135deg, #FFE5E0, #FFF0ED)";
            this.style.color = "#F96C50";
            this.style.border = "2px solid #F96C50";
          }, 2000);
        });
      });

      // í”¼ë“œë°± ëª¨ë‹¬ ì—´ê¸°
      function openFeedbackModal() {
        document.getElementById("feedbackModal").style.display = "block";
        document.body.style.overflow = "hidden";
      }

      // í”¼ë“œë°± ëª¨ë‹¬ ë‹«ê¸°
      function closeFeedbackModal() {
        document.getElementById("feedbackModal").style.display = "none";
        document.body.style.overflow = "auto";
      }

      // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
      window.onclick = function (event) {
        const modal = document.getElementById("feedbackModal");
        if (event.target === modal) {
          closeFeedbackModal();
        }
      };

      // ë§Œì¡±ë„ ì…ë ¥ ë¡œì§
      document.addEventListener("DOMContentLoaded", function () {
        // ë§Œì¡±ë„ ì´ëª¨í‹°ì½˜ ì„ íƒ
        const emojiRating = document.getElementById("emoji-rating");
        const selectedRating = document.getElementById("selected-rating");
        const satisfactionText = document.getElementById("satisfaction-text");
        const submitBtn = document.getElementById("satisfaction-submit");
        const resultDiv = document.getElementById("satisfaction-result");
        let ratingValue = 0;

        emojiRating.querySelectorAll("span").forEach((span) => {
          span.addEventListener("click", function () {
            ratingValue = this.getAttribute("data-value");
            emojiRating.querySelectorAll("span").forEach((s) => {
              s.classList.remove("selected", "unselected");
              if (s === this) {
                s.classList.add("selected");
              } else {
                s.classList.add("unselected");
              }
            });
            // ì•ˆë‚´ë¬¸êµ¬
            const label = [
              "ë§¤ìš° ë¶ˆë§Œì¡±",
              "ë¶ˆë§Œì¡±",
              "ë³´í†µ",
              "ë§Œì¡±",
              "ë§¤ìš° ë§Œì¡±",
            ][ratingValue - 1];
            selectedRating.textContent = `${label} (${this.textContent})`;
            satisfactionText.style.display = "block";
            submitBtn.style.display = "inline-block";
            resultDiv.textContent = "";
          });
        });

        // textarea ìë™ ë†’ì´ ì¡°ì ˆ
        satisfactionText.addEventListener("input", function () {
          this.style.height = "auto";
          this.style.height = this.scrollHeight + "px";
        });

        // ì œì¶œ ë²„íŠ¼
        submitBtn.addEventListener("click", function () {
          if (!ratingValue) {
            resultDiv.style.color = "#F96C50";
            resultDiv.textContent = "ë§Œì¡±ë„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!";
            return;
          }
          const text = satisfactionText.value.trim();
          const today = new Date();
          const y = today.getFullYear();
          const m = String(today.getMonth() + 1).padStart(2, "0");
          const d = String(today.getDate()).padStart(2, "0");
          const dateStr = `${y}ë…„${m}ì›”${d}ì¼ ê³„íš ìƒì„±ì— ëŒ€í•œ í”¼ë“œë°±`;
          const feedback = {
            date: dateStr,
            rating: ratingValue,
            text: text,
          };
          // ì €ì¥ (localStorageì— í”¼ë“œë°± ì €ì¥í•´ë‘ )
          let arr = JSON.parse(
            localStorage.getItem("planSatisfaction") || "[]"
          );
          arr.push(feedback);
          localStorage.setItem("planSatisfaction", JSON.stringify(arr));
          resultDiv.style.color = "#2D7A2D";
          resultDiv.textContent = "í”¼ë“œë°±ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤!";
          // ì´ˆê¸°í™”
          satisfactionText.value = "";
          selectedRating.textContent = "";
          emojiRating
            .querySelectorAll("span")
            .forEach((s) => s.classList.remove("selected", "unselected"));
          satisfactionText.style.display = "none";
          submitBtn.style.display = "none";
          setTimeout(() => {
            resultDiv.textContent = "";
          }, 2500);
        });
      });
    </script>
  </body>
</html>
